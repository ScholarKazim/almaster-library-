{% extends "base.html" %}

{% block content %}
<div class="mb-5">
    <h1 class="display-6 fw-bold text-dark mb-1">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ğŸ“Š</h1>
    <p class="text-secondary">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ù…Ø¨ÙŠØ¹Ø§Øª Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø§Ø³ØªØ±</p>
</div>

<!-- Stats Info Cards -->
<div class="row g-4 mb-5 text-center">
    <div class="col-6 col-md-3">
        <div class="bg-white p-4 rounded-5 shadow-sm border-top border-5 border-primary">
            <span class="fs-1 d-block mb-2">ğŸ’°</span>
            <h6 class="text-muted small fw-bold mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h6>
            <h4 class="fw-bold text-dark mb-0 ls-1">{{ "{:,.0f}".format(total_sales) }}</h4>
            <span class="small text-muted">Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ</span>
        </div>
    </div>
    <div class="col-6 col-md-3">
        <div class="bg-white p-4 rounded-5 shadow-sm border-top border-5 border-success">
            <span class="fs-1 d-block mb-2">ğŸ“¦</span>
            <h6 class="text-muted small fw-bold mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h6>
            <h4 class="fw-bold text-dark mb-0">{{ total_orders }}</h4>
            <span class="small text-muted">Ø·Ù„Ø¨ ÙˆØ§Ø±Ø¯</span>
        </div>
    </div>
    <div class="col-6 col-md-3">
        <div class="bg-white p-4 rounded-5 shadow-sm border-top border-5 border-warning">
            <span class="fs-1 d-block mb-2">â³</span>
            <h6 class="text-muted small fw-bold mb-1">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h6>
            <h4 class="fw-bold text-dark mb-0">{{ pending_orders }}</h4>
            <span class="small text-muted">Ø¨Ø§Ù†ØªØ¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
        </div>
    </div>
    <div class="col-6 col-md-3">
        <div class="bg-white p-4 rounded-5 shadow-sm border-top border-5 border-info">
            <span class="fs-1 d-block mb-2">ğŸ“…</span>
            <h6 class="text-muted small fw-bold mb-1">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h6>
            <h4 class="fw-bold text-dark mb-0">{{ today_orders }}</h4>
            <span class="small text-muted">Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</span>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 col-md-8">
        <div class="bg-white rounded-5 shadow-sm p-4 border overflow-hidden mb-4">
            <div class="d-flex justify-content-between align-items-center mb-4 px-2">
                <h5 class="fw-bold m-0 text-dark">Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©</h5>
                <a href="{{ url_for('admin_orders') }}"
                    class="btn btn-sm btn-light rounded-pill px-3 fw-bold text-primary">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
            </div>

            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light">
                        <tr class="small text-muted">
                            <th class="border-0 px-3 py-3">Ø§Ù„Ù…Ø³ØªÙ„Ù…</th>
                            <th class="border-0 py-3">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                            <th class="border-0 py-3">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th class="border-0 py-3 text-center">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in recent_orders %}
                        <tr>
                            <td class="px-3 py-3">
                                <span class="fw-bold d-block text-dark small">{{ order.full_name }}</span>
                                <span class="text-muted" style="font-size: 0.7rem;">{{ order.id }}#</span>
                            </td>
                            <td class="py-3">
                                <span class="fw-bold text-primary small">{{ "{:,.0f}".format(order.total_price) }}
                                    Ø¯.Ø¹</span>
                            </td>
                            <td class="py-3">
                                <span
                                    class="badge rounded-pill px-2 py-1 {% if order.status == 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±' %}bg-warning-light text-warning{% elif order.status == 'ØªÙ… Ø§Ù„Ø´Ø­Ù†' %}bg-primary-light text-primary{% else %}bg-success-light text-success{% endif %}"
                                    style="font-size: 0.65rem;">
                                    {{ order.status }}
                                </span>
                            </td>
                            <td class="py-3 text-center text-muted small" style="font-size: 0.7rem;">
                                {{ order.created_at.strftime('%m/%d %H:%M') }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-12 col-md-4">
        <div class="bg-grad-blue p-4 rounded-5 shadow-lg text-white mb-4">
            <h5 class="fw-bold mb-3">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø© âš¡</h5>
            <div class="d-grid gap-2">
                <a href="{{ url_for('add_product') }}" class="btn btn-white-glass rounded-pill fw-bold py-2">
                    <span class="me-2">â•</span> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                </a>
                <a href="{{ url_for('admin_products') }}" class="btn btn-white-glass rounded-pill fw-bold py-2">
                    <span class="me-2">âœï¸</span> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                </a>
                <a href="{{ url_for('admin_orders') }}" class="btn btn-white-glass rounded-pill fw-bold py-2">
                    <span class="me-2">ğŸ“‹</span> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .ls-1 {
        letter-spacing: 0.5px;
    }

    .bg-warning-light {
        background-color: rgba(255, 193, 7, 0.1);
    }

    .bg-primary-light {
        background-color: rgba(13, 110, 253, 0.1);
    }

    .bg-success-light {
        background-color: rgba(25, 135, 84, 0.1);
    }

    .btn-white-glass {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        transition: all 0.2s;
    }

    .btn-white-glass:hover {
        background: rgba(255, 255, 255, 0.3);
        color: white;
        transform: translateY(-2px);
    }
</style>
{% endblock %}